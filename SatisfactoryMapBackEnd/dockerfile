FROM python:3.12-slim

WORKDIR /app

ARG MINIO_ROOT_USER
ENV MINIO_ROOT_USER=${MINIO_ROOT_USER}

ARG MINIO_ROOT_PASSWORD
ENV MINIO_ROOT_PASSWORD=${MINIO_ROOT_PASSWORD}

ARG MINIO_BUCKET_API_URL
ENV MINIO_BUCKET_API_URL=${MINIO_BUCKET_API_URL}

ARG MYSQL_ROOT_USER
ENV MYSQL_ROOT_USER=${MYSQL_ROOT_USER}

ARG MYSQL_ROOT_PASSWORD
ENV MYSQL_ROOT_PASSWORD=${MYSQL_ROOT_PASSWORD}

ARG MYSQL_DATABASE
ENV MYSQL_DATABASE=${MYSQL_DATABASE}

COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

COPY . .

EXPOSE 8080

ENV FLASK_APP=main.py
ENV FLASK_ENV=development

CMD ["python", "main.py"]